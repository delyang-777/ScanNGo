{% extends 'base.html' %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto; padding: 0; height: 100vh; display: flex; flex-direction: column;">

    <!-- Fixed Header with Back Arrow -->
    <div style="position: fixed; top: 0; left: 0; right: 0;
                display: flex; align-items: center; gap: 10px;
                padding: 15px; background: rgba(15,15,31,0.95);
                box-shadow: 0 2px 10px rgba(0,255,255,0.3); z-index: 999;">

        <!-- Back Arrow -->
        <a href="{{ url_for('student_dashboard') }}"
           style="display: inline-flex; align-items: center; justify-content: center;
                  padding: 8px 14px; background: linear-gradient(135deg, #00f6ff, #00fff6);
                  color: #0f0f1f; font-weight: bold; font-size: 1.1em; border-radius: 30px;
                  text-decoration: none; box-shadow: 0 0 6px #00f6ff, inset 0 0 10px #00fff6;
                  transition: transform 0.3s ease;">
            &#8592;
        </a>

        <h2 style="color: #00f6ff; font-family: 'Orbitron', sans-serif; font-size: 2em;
                   text-shadow: 0 0 6px #00f6ff, 0 0 10px #00fff6; margin: 0; white-space: nowrap;">
            Events
        </h2>
    </div>

    <!-- Spacer to avoid overlapping header -->
    <div style="height: 80px;"></div>

    <!-- Notification Toast -->
    <div id="toast" style="
        position: fixed;
        top: 90px;
        left: 50%;
        transform: translateX(-50%);
        padding: 12px 20px;
        background: #00ff85;
        color: #0f0f1f;
        font-weight: bold;
        border-radius: 10px;
        box-shadow: 0 0 12px #00ff85, inset 0 0 8px #00d4ff;
        display: none;
        z-index: 1000;
        transition: opacity 0.5s ease;">
        Event scanned successfully!
    </div>

    <!-- Table -->
    <div style="flex: 1; overflow-y: auto; padding: 0 10px;">
        <table border="1" style="width: 100%; border-collapse: collapse; color: #fff; background-color: #0f0f1f;">
            <thead>
                <tr style="background: #00f6ff; color: #0f0f1f;">
                    <th style="padding: 10px;">Title</th>
                    <th style="padding: 10px;">Date</th>
                    <th style="padding: 10px;">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for e in events %}
                <tr style="border-bottom: 1px solid #00f6ff33;">
                    <td style="padding: 10px;">{{ e.title }}</td>
                    <td style="padding: 10px;">{{ e.event_date }}</td>
                    <td style="padding: 10px;">
                        {% if e.scanned %}
                            <em>Checked in</em>
                            <script>
                                // Show toast for scanned events
                                window.addEventListener('DOMContentLoaded', () => {
                                    const toast = document.getElementById('toast');
                                    toast.style.display = 'block';
                                    setTimeout(() => { toast.style.display = 'none'; }, 3000);
                                });
                            </script>
                        {% else %}
                            <span style="color: #ff6b6b;">Pending</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

<style>
    body {
        background-color: #0f0f1f;
        font-family: 'Poppins', sans-serif;
    }
    a:hover {
        transform: scale(1.05);
        box-shadow: 0 0 12px #00ff85, inset 0 0 10px #00d4ff;
    }
    table th, table td {
        border: 1px solid #00f6ff44;
    }
    @media (max-width: 500px) {
        h2 { font-size: 1.6em !important; }
        table { font-size: 0.9em; }
    }
</style>

{% endblock %}
